<!DOCTYPE html>
 <html lang="en">
 
 <head>
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="description" content="">
     <meta name="author" content="">
     <link rel="icon" href="../../favicon.ico">
 
     <title>FormulaiR</title>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.js"></script>
     <script>
       $(document).ready(function() {
            $('button').click(function(e) {
                document.getElementById("status").innerHTML = "Busy...";
                e.preventDefault();
                $.ajax({
                    data: $('form').serialize(),
                    type: 'POST',
                    success: function(response) {
                        var parsed = JSON.parse(response);
                        document.getElementById("content").innerHTML = parsed.Result;
                        document.getElementById("status").innerHTML = parsed.Status;
                    },
                    error: function(error) {
        				console.log(error);
                    }
                });
            });
        });
     </script>
 </head>

 <body>
      {% from "_formhelpers.html" import render_field %}
      <form method=post action="">
        <dl>
          {{ render_field(form.rcommande, class="rcommande", style="width: 700px; height: 150px; background-color: black; color: white; box-sizing: border-box; font: bold 16px 'Liberation Mono', sans-serif;") }}
        </dl>
        <p>
        <button class="btn btn-lg btn-primary btn-block" id="button">Run command</button>
        </form>
    <div class="w3c-container">
        <br><br>
        <!-- <div>Session {{key}}</div><br> -->
        <b>Console output : </b><br><br>
  	  <div id='content' style="font: bold 14px 'Liberation', sans-serif;"></div><br><br>
        Status :
	  <div id='status' style="color: DimGrey; font: italic 12px;"></div>
    </div>
 </body>
 </html>