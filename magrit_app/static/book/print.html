<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Les docs de Magrit</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Documentation utilisateur de Magrit">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="">

        <link rel="stylesheet" href="book.css">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">

        <!-- MathJax -->
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>
    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = localStorage.getItem('theme');
            if (theme == null) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = localStorage.getItem('sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="./import_fr.html"><strong>1.</strong> Import des données</a></li><li><a href="./projections_fr.html"><strong>2.</strong> Choix d'une projection</a></li><li><a href="./carto_fr.html"><strong>3.</strong> Choix de la représentation</a></li><li><ul class="section"><li><a href="./carto/propsmbol_fr.html"><strong>3.1.</strong> Carte de stocks</a></li><li><a href="./carto/choro_fr.html"><strong>3.2.</strong> Carte de ratios</a></li><li><a href="./carto/typo_fr.html"><strong>3.3.</strong> Carte qualitative</a></li><li><a href="./carto/propsmbolchoro_fr.html"><strong>3.4.</strong> Carte de stocks et ratios</a></li><li><a href="./carto/propsmboltypo_fr.html"><strong>3.5.</strong> Carte de stocks et qualitative</a></li><li><a href="./carto/grid_fr.html"><strong>3.6.</strong> Carroyage</a></li><li><a href="./carto/cartogram_fr.html"><strong>3.7.</strong> Cartogramme</a></li><li><a href="./carto/smooth_fr.html"><strong>3.8.</strong> Carte lissée</a></li><li><a href="./carto/discont_fr.html"><strong>3.9.</strong> Carte de discontinuités</a></li><li><a href="./carto/links_fr.html"><strong>3.10.</strong> Carte de liens</a></li><li><a href="./carto/typosymbol_fr.html"><strong>3.11.</strong> Carte qualitative (pictogrammes)</a></li></ul></li><li><a href="./discretisation_fr.html"><strong>4.</strong> Discrétisation des données</a></li><li><a href="./layout_fr.html"><strong>5.</strong> Habillage de la carte</a></li><li><a href="./export_fr.html"><strong>6.</strong> Export des données</a></li><li><a href="./datasets_fr.html"><strong>7.</strong> Jeux de données</a></li><li><a href="./privacy.html"><strong>8.</strong> Respect de la vie privée</a></li><li class="spacer"></li><li class="affix"><a href="misc/contributors.html">Contributeurs</a></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush"></i>
                    </div>

                    <h1 class="menu-title">Les docs de Magrit</h1>

                    <div class="right-buttons">
                        <i id="print-button" class="fa fa-print" title="Print this book"></i>
                    </div>
                </div>

                <div id="content" class="content">
                    <h1>Import et manipulation des données</h1>
<p>Deux éléments fondamentaux servent de point de départ à la réalisation d'une carte dans Magrit : le fond de carte et les données qui y sont associées.
De larges possibilités sont offertes à l'utilisateur concernant l'ajout de ces deux éléments.</p>
<p style="text-align: center;">
<img src="img/win_imp_fr.png" alt="Dialogue d'import"/>
</p>
<h2>Import du fond de carte</h2>
<p>L'import du fond de carte principal peut se faire de différentes manières :</p>
<ul>
<li>Par un click sur le bouton <em>Ajout d'un fond de carte</em>.</li>
<li>Par un glisser-déposer dans la zone de la carte.</li>
</ul>
<p>Plusieurs formats sont supportés:</p>
<ul>
<li><code>Shapefile</code></li>
<li><code>GeoJSON</code></li>
<li><code>TopoJSON</code></li>
<li><code>kml</code></li>
<li><code>gml</code></li>
<li><code>csv</code> (contenant des colonnes x/y ou <em>geometry</em>)</li>
</ul>
<blockquote>
<p><strong>Note:</strong>
La plupart des formats permettent de spécifier un système de coordonnées de référence; cette indication est ici obligatoire pour ouvrir correctement le fichier (présence du fichier <code>.prj</code> pour le format ShapeFile par exemple)
Si aucun système de coordonnées de référence n'est spécifié, l'application considère qu'il s'agit de coordonnées géographiques.
Les spécifications des formats <a href="http://www.gdal.org/drv_kml.html">KML</a> et <a href="https://tools.ietf.org/html/rfc7946#section-4">GeoJSON</a> imposent l'utilisation de coordonées géographiques (<em>EPSG:4326 / urn:ogc:def:crs:OGC::CRS84</em> )</p>
</blockquote>
<h2>Import d'un tableau de données</h2>
<p>L'ajout d'un tableau de données peut être effectué de plusieurs manières :</p>
<ul>
<li>Par un clic sur le bouton <em>Ajout d'un jeu de données</em></li>
<li>Par un glisser-déposer du fichier dans le menu d'import des données</li>
</ul>
<p>Plusieurs format sont pris en charge pour l'import des données :</p>
<ul>
<li><code>csv</code> (champs séparés par une virgule ou par un point virgule)</li>
<li><code>tsv</code> (champs séparés par une tabulation)</li>
<li><code>xls</code>, <code>xlsx</code> et <code>ods</code> (à condition que la feuille à utiliser soit la première du document et contienne seulement la table de données).</li>
</ul>
<h2>Jointure des données</h2>
<p>Lorsqu'un fond de carte et un jeu de données externes on été ajoutées, il devient possible de les joindre.
Cette opération et appelée &quot;jointure&quot; (c'est également le cas dans les logiciels SIG ou dans certaines bases de données) et s'effectue en choisissant les colonnes d'identifiants dans le jeu de données et dans le fond de carte.</p>
<p style="text-align: center;">
<img src="img/win_jnt_fr.png" alt="Dialogue de jointure"/>
</p>
<blockquote>
<p><img src="img/joinfalse.png" alt="joinfalse" style="width: 35px;"/> Apparence de l'élément avant jointure<br />
<img src="img/jointrue.png" alt="jointrue" style="width: 35px;"/> Apparence de l'élément après jointure des champs</p>
</blockquote>
<h2>Typage des données</h2>
<p>A chaque type de données est associé un certain nombre de modes représentation possibles. Une fois les données importées il est donc important de définir le type de chacune des variables à cartographier.</p>
<p>5 types de données sont possibles :</p>
<ul>
<li><em>Identifiant</em> (champs notamment utilisés pour joindre les données)</li>
<li><em>Stock</em></li>
<li><em>Ratio</em></li>
<li><em>Catégorie</em></li>
<li><em>Inconnu</em> (champs non cartographiables)</li>
</ul>
<h3>Stock</h3>
<p>Les variables quantitatives de stock expriment des quantités concrètes et leur somme ont un sens (nombre de chômeurs, population totale, par exemple).
La représentation de ce type de phénomènes doit respecter l’expression de ces quantités et les différences de proportionnalité entre les différents éléments qui en découlent.
Exemples : Population totale en milliers d'habitants, Superficie en hectares.</p>
<h3>Ratios</h3>
<p>Les variables quantitatives de taux, ou ratios, expriment un rapport entre deux quantités dont la somme n’a pas de signification. Par extension, on peut y associer les indicateurs composites numériques associant plusieurs indicateurs (indices…).
Exemples : PIB par habitant, Indicateur de développement humain.</p>
<h3>Catégories</h3>
<p>Les modalités des caractères qualitatifs ne sont pas mesurables, ce sont des noms, des sigles ou des codes. On ne peut sommer des modalités qualitatives, on ne peut en calculer la moyenne.
Exemples : Noms des départements, Type d'occupation du sol.</p>
<h3>Identifiant</h3>
<p>Ce champ contient des valeurs permettant d'identifier de manière unique chacune des entités de la couche de données.<br />
Ces sont ces champs qui sont utilisés pour effectuer une jointure de données.<br />
Les valeurs de ces champs sont également transférées aux entitées correspondantes dans les représentations qui le permettent (symboles proportionnels, cartogrammes, cartes choroplèthes, cartes qualitatives par à-plat de couleurs ou par utilisation de pictogrammes).
Exemple: Code INSEE de la commune, Code ISO2 d'un pays.</p>
<p style="text-align: center;">
<img src="img/win_typ_fr.png" alt="Dialogue de typage des données"/>
</p>
<h2>Affichage et enrichissement des tables de données</h2>
<p>L'affichage des tableaux de données correspondant à chacune des couches ajoutées (ou obtenues en résultat d'un type de représentation) est possible via le gestionnaire de couche et le bouton représentant une table de donnée.</p>
<p style="text-align: center;">
<img src="img/win_tab_fr.png" alt="Voir la table"/>
</p>
<h1>Projections</h1>
<p>De nombreuses projections cartographiques sont disponibles dans l'application.<br />
La séléction d'une projection s'effectue dans la partie supérieure droite de la fenêtre.</p>
<p style="text-align: center;">
<img src="img/win_prc2_fr.png" alt="Changer la projection"/>
</p>
<p>Le choix d'une projection est accompagné du choix de son centrage.
Celui-ci est par défaut sur la longitude 0°.</p>
<p>Plusieurs attributs permettent de distinguer ces projections :</p>
<ul>
<li>la conservation locale des surfaces (ces projections sont dites <strong>équivalentes</strong>, c'est par exemple le cas de la <em>projection azimutale équivalente de Lambert</em>)</li>
<li>la conservation locale des angles (ces projections conservent les formes et sont dites <strong>conformes</strong>, c'est par exemple le cas de la <em>projection Mercator</em>)</li>
<li>la représentation du globe sous une forme interrompue (<em>projection HEALPix</em> et <em>projection de Goode</em> par exemple)</li>
</ul>
<p style="text-align: center;"><img src="img/anim_projection_transp.gif" alt="animation_projection" style="width: 260px;"/><br></p>
<p>Selon l'échelle d'affichage de la carte et la déformation appliquée par la projection, la présence d'un figuré indiquant le nord peut s'avérer peu ou pas pertinente.<br />
Il est toutefois possible d'ajouter une couche représentant le tracé des lignes de latitude et de longitude (cette couche d'informations est ici appelé &quot;graticule&quot; et est disponible dans la section &quot;ajout d'éléments d'habillage&quot;). Cette couche d'information permet une bonne visualisation des déformations apportées par les différentes projections.
Il est également possible (et conseillé lors de l'utilisation des projections dites &quot;interrompues&quot;) d'ajouter une couche d'informations représentant les limites du globe selon le découpage appliqué par la projection.</p>
<blockquote>
<h4>Note:</h4>
<ul>
<li>La modification de la projection à utiliser est possible à tout moment</li>
<li>Lors de la réalisation d'une carte d'une faible emprise spatiale, l'utilisation de certaines projection n'est pas pertinent et est désactivé par défaut.</li>
</ul>
</blockquote>
<h4>Exemple d'utilisation des graticules et du fond de l'emprise du globe avec des représentations originales :</h4>
<p style="text-align: center;">
<img src="img/proj_loximuthal.png" alt="proj_loximuthal" style="width: 400px;"/></br>
projection Loximuthal</br></br>
<img src="img/proj_healpix.png" alt="proj_healpix" style="width: 400px;"/></br>
projection HEALPix</br></br>
<img src="img/proj_interrupted.png" alt="proj_interrupted" style="width: 400px;"/></br>
projection Interrupted Homolosine</br></br>
<img src="img/proj_peirce.png" alt="proj_peirce" style="width: 400px;"/></br>
projection Peirce</br></br>
<img src="img/proj_eisenlohr.png" alt="proj_eisenlohr" style="width: 400px;"/></br>
projection Eisenlohr</br></p>
<h1>Choix de la représentation</h1>
<p>Le choix d'un type de représentation est l'élément qui guide le processus de création d'une carte. Ce choix s'effectue en fonction du type des données à représenter (données de stocks, de ratios ou qualitatives) et du type de fond de carte utilisé (points, polygones, etc.).</p>
<p style="text-align: center;">
<img src="img/win_rep_fr.png" alt="Dialogue de choix de représentation"/>
</p>
<p>Représentations adaptées à des données de stocks :</p>
<ul>
<li><a href="./carto/propsmbol_fr.html">carte de stocks</a></li>
<li><a href="./carto/cartogram_fr.html">cartogramme</a></li>
</ul>
<p>Représentations adaptées à des données de ratios :</p>
<ul>
<li><a href="./carto/choro_fr.html">carte choroplèthe</a></li>
<li><a href="./carto/propsmbolchoro_fr.html">carte de stocks et ratios</a></li>
</ul>
<p>Représentations adaptées à des données qualitatives :</p>
<ul>
<li><a href="./carto/typo_fr.html">carte qualitative</a></li>
<li><a href="./carto/typosymbol_fr.html">carte qualitative (pictogrammes)</a></li>
<li><a href="./carto/propsmboltypo_fr.html">carte de stocks et qualitative</a></li>
</ul>
<p>D'autres méthodes permettent de créer des représentations originales :</p>
<ul>
<li><a href="./carto/grid_fr.html">carroyage</a></li>
<li><a href="./carto/smooth_fr.html">carte lissée</a></li>
<li><a href="./carto/discont_fr.html">carte de discontinuités</a></li>
<li><a href="./carto/links_fr.html">carte de liens</a></li>
</ul>
<h1>Carte de stocks</h1>
<p>Ces cartes permettent de représenter des <strong>données de stocks</strong> (ou quantitatives absolues) par des <strong>figurés proportionnels</strong>. Les données de stocks expriment des quantités concrètes : la somme des modalités des éléments a un sens.</p>
<blockquote>
<h4>Paramètres</h4>
<ul>
<li>Le champ contenant les valeurs à utiliser.</li>
<li>La taille (en pixels) à appliquer sur le valeur définie à la suite.</li>
<li>Le type de symbole à utiliser (cercle ou carré).</li>
<li>La couleur des symboles. Il est possible de choisir deux couleurs si un seuil est défini.</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/propsymbol.png" alt="img_propsymbol_map" style="width: 480px;"/>
</p>
<ul>
<li>Données : Pays du monde</li>
<li>Champ utilisé : <strong>jamesbond</strong></li>
<li>Symbole : <strong>cerle</strong></li>
<li>Taille fixée à <strong>40px</strong> sur la valeur <strong>22</strong></li>
</ul>
<h1>Carte de ratios</h1>
<p>Les <strong>cartes choroplèthes</strong> permettent de représenter des <strong>données de ratios</strong> par plages de couleurs ou de niveaux de gris.
Les données de rapports (de taux, d’intensités ou de ratios) sont des données quantitatives calculées à partir de données de stocks dont ont fait le rapport ou dont on calcule le taux à partir d’un total. Elles expriment les caractéristiques des individus observés mais leur total n'a pas de signification concrète.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Nom du champ contenant les valeurs à utiliser</li>
<li>Choix d'une discrétisation adaptée pour la série de valeurs</li>
</ul>
</blockquote>
<p>Un clic sur le bouton <img src="img/discr.png" alt="choro_map" style="width: 26px;"/> ouvre une boite dialogue permettant d'affiner la discrétisation et de choisir la palette de couleur.</p>
<p style="text-align: center;">
<img src="img/discr3.png" alt="choro_map" style="width: 480px;"/>
</p>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/choropleth_map.png" alt="choro_map" style="width: 480px;"/>
</p>
<h1>Carte qualitative</h1>
<p>Ce type de carte permet de représenter des entités surfaciques selon la valeur prise un par un champ dont les valeurs sont regroupées en catégories.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Nom du champ contenant les valeurs à utiliser</li>
<li>Choix des couleurs correspondantes aux catégories à représenter</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/typo.png" alt="img_typo_map" style="width: 480px;"/>
</p>
<ul>
<li>Champ utilisé : <strong>LIBEPT</strong></li>
</ul>
<h1>Carte de stocks et ratios</h1>
<p>Ce type de représentation permet de combiner la représentation de données de stocks et celles de ratios sur une même carte.<br />
La donnée de ratio est représentée à l’intérieur du figuré représentant le stock.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le nom du champ contenant les valeurs à utiliser pour définir la taille des symboles.</li>
<li>La taille (en pixels) à appliquer à la valeur définie à la suite.</li>
<li>La valeur sur laquelle fixer la taille.</li>
<li>Le type de symbole à utiliser (cercle ou carré).</li>
<li>Le nom du champ contenant les valeurs à utiliser (après discrétisation) pour colorer les symboles.</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/propsymbolschoro.png" alt="img_propsymbolchoro_map" style="width: 480px;"/>
</p>
<h1>Carte de stocks et qualitative</h1>
<p>Ce type de représentation permet d'établir une correspondance entre des données de stock et une variable d'appartenance (variable catégorielle).</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le nom du champ contenant les valeurs à utiliser pour définir la taille des symboles.</li>
<li>La taille (en pixels) à appliquer à la valeur définie à la suite.</li>
<li>La valeur sur laquelle fixer la taille.</li>
<li>Le type de symbole à utiliser (cercle ou carré).</li>
<li>Le nom du champ contenant les valeurs à utiliser pour colorer les symboles.</li>
<li>Le choix des couleurs correspondantes aux catégories à représenter</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/propsymboltypo_map.png" alt="img_propsymboltypo_map" style="width: 480px;"/>
</p>
<ul>
<li>Champ utilisé : <strong>pop1999</strong></li>
<li>Symbole <strong>carré</strong></li>
<li>Taille fixée de <strong>22px</strong> sur la valeur <strong>1000000</strong></li>
<li>Champ utilisé pour l'aplat de couleur : <strong>Pays</strong></li>
</ul>
<h1>Carroyage</h1>
<p>La méthode du carroyage est une méthode permettant d'essayer de s'affranchir de l'arbitraire et de l'irrégularité d'un découpage administratif.<br />
Elle met en évidence les grandes tendances de le répartition spatiale d'une donnée et de traiter des données, en découpant le territoire en unités régulières.
Les carreaux ainsi créés sont affectés de la valeur de la variable observée pour les entitées intersectées, au prorata des surfaces concernées.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Nom du champ à utiliser (variable de stock)</li>
<li>Taille des carreaux en kilomètres</li>
<li>Forme des carreaux</li>
<li>Palette de couleurs à utiliser</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/gridded.png" alt="gridded_map" style="width: 480px;"/>
</p>
<ul>
<li>Champ utilisé : <strong>pop2008</strong></li>
<li>Carreaux en forme d'<strong>hexagone</strong></li>
<li>Taille de référence : <strong>65km</strong></li>
</ul>
<h1>Cartogramme</h1>
<p>Les anamorphoses sont utilisées en cartographie statistique pour montrer l'importance d'un phénomène donné : ce type de carte est couramment appelé un cartogramme.<br />
Elles permettent de déformer les unités territoriales (polygones) sur la base d'un attribut rapporté à la superficie des entités (densité).<br />
Magrit propose deux méthodes de création de cartogrammes : Dougenik et al et Olson (<strong>refs</strong>).</p>
<blockquote>
<h3>Paramètres (méthode Dougenik)</h3>
<ul>
<li>Le nom du champ contenant les valeurs à utiliser</li>
<li>Le nombre d'itérations à effectuer avant d'obtenir le résultat</li>
<li>Le nom de la couche produite</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/dougenik.png" alt="dougenik_map" style="width: 480px;"/>
</p>
<ul>
<li>Méthode de <strong>Dougenik</strong></li>
<li>Champ utilisé : <strong>pop2008</strong></li>
<li><strong>5 itérations</strong></li>
</ul>
<h1>Carte lissée</h1>
<p>Méthode d'analyse spatiale et de réprésentation basée sur le calcul de potentiels (dit &quot;de Stewart&quot;) et qui n’a pas vocation à annuler ou atténuer le bruit (information parasite qui tend à brouiller la lecture) mais s’affranchit complètement du maillage administratif de départ. Elle permet d’observer ainsi la répartition spatiale du phénomène étudié, quelque soit l’hétérogénéité du maillage affecter en tout point de la carte, la valeur de la densité du phénomène dans le voisinage de ce point. En fonction des paramètres utilisés, cette méthode permet <em>&quot;de voir aussi bien les spécificités locales d'un phénomène que ses tendances générales&quot;</em> (Lambert &amp; Zanin, 2016).</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le nom du champ contenant les valeurs à utiliser.</li>
<li><em>(optionnel)</em> Le nom du champ à utiliser pour calculer un ratio.</li>
<li>Le <em>span</em> (la &quot;portée&quot; de la fonction d'interaction) détermine la distance du voisinage pris en compte.</li>
<li>Le paramètre <em>beta</em> (la &quot;friction de la distance&quot;), c'est à dire la pente de la fonction mathématique qui agit sur une prise en compte plus ou moins importante de la distance.</li>
<li>La résolution de la grille régulière créer pour l'interpolation (en <em>km</em>).</li>
<li>Le type de fonction d'interaction.</li>
<li>Le nombre de classe souhaité lors de la création des isolignes.</li>
<li><em>(optionnel)</em> Le nom de la couche de masquage.</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;"> <img src="img/smoothed2.png" alt="smoothed_map" style="width: 480px;"/> </p>
<h1>Carte des discontinuités</h1>
<p>Les cartes de discontinuités mettent en avant les limites (ou &quot;frontières&quot;) entre les entités étudiées, en leur affectant une épaisseur relative au différentiel de valeur existant entre elles.
Deux méthodes permettent de calculer ce différentiel, on parlera ainsi soit de <strong>discontinuité absolue</strong> (écart absolu entre les valeurs de la variable étudiée c'est à dire <em>max(A,B) - min(A,B)</em>) ou de discontinuité relative (rapport <em>max(A,B) / min(A,B)</em>).
La visualisation de lignes de discontinuités permet de mettre en exergue les ruptures spatiales des phénomènes socio-économiques étudiés, qui selon la formule de Brunet et Dolphus (1990) montre que <em>« l’espace géographique est fondamentalement discontinu »</em>. Cette représentation est particulièrement pertinente lorsqu'elle peut être combinée à une représentation par aplats de couleurs (Cf. cartes de ratio).</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le champ contenant les valeurs à utiliser.</li>
<li>Le champ contenant des identifiants uniques permettant d'identifier les tronçons.</li>
<li>Le type de discontinuités (c'est à dire le rapport entre la valeur des deux entités, parmi 'relatif' ou 'absolu').</li>
<li>Le nombre de classe à créer.</li>
<li>La méthode utilisée pour discrétiser les valeurs.</li>
<li>La couleur utilisée pour représenter les discontinuités.</li>
</ul>
</blockquote>
<h4>Exemple de rendu à partir d'un jeu de données d'exemple :</h4>
<p style="text-align: center;">
<img src="img/discont.png" alt="discont_map" style="width: 480px;"/>
</p>
<h1>Carte des liens</h1>
<p>Ce type de carte représente, avec des lignes d'épaisseur proportionnelle à l'intensité du phénomène, les connexions (flux/liens) existant entre des couples de lieux.
Différents éléments, tels que la présence de chevauchements trop nombreux, peuvent nuire à la lisibilité de ce type de représentation,
Ce type de carte requiert généralement d'effectuer une sélection après le premier rendu, consistant par exemple à ne pas représenter les flux les plus faibles.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le champ contenant les identifiants des entités 'origine'.</li>
<li>Le champ contenant les identifiants des entités 'destination'.</li>
<li>Le champ contenant les valeurs de l'intensité du phénomène entre 'i' et 'j'.</li>
<li>Le type de méthode à utiliser pour discrétiser les valeurs.</li>
<li>Le nombre de classes à créer lors de l'application de la méthode précédemment définie.</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/flows.png" alt="link_map" style="width: 480px;"/>
</p>
<h4>Informations sur le format des données attendues :</h4>
<p>La table de données à joindre doit être dans un format supporté par l'application (format .csv, .xls/.xlsx ou .ods). Cette table doit contenir au minimum 3 colonnes : les identifiants des entités d'origine, les identifiants des entités de destination, les valeurs correspondants à l'intensité du phénomène mesuré. La première ligne de cette table est à réserver au nom de colonne; chacune des lignes suivantes décrit un lien, entre un couple de lieu, à créer sur la carte.<br />
Ainsi, les premières lignes d'une table décrivant des liens entre pays européens pourraient être écrites :</p>
<table><thead><tr><td> Origine       </td><td> Destination   </td><td> Valeur  </td></tr></thead>
<tr><td> BE            </td><td> LUX           </td><td> 12    </td></tr>
<tr><td> BE            </td><td> FR            </td><td> 8     </td></tr>
<tr><td> BE            </td><td> DE            </td><td> 10    </td></tr>
<tr><td> LUX           </td><td> DE            </td><td> 6     </td></tr>
<tr><td> LUX           </td><td> FR            </td><td> 3     </td></tr>
</table>
<p>Une table d'exemple de ce type peut être téléchargée ci-dessous; elle permet la réalisation d'une carte de lien lorsqu'elle est utilisé avec le fond des pays européens.</p>
<p><a href="https://raw.githubusercontent.com/riatelab/magrit/master/magrit_app/static/data_sample/links.csv">Table d'exemple</a></p>
<p><a href="https://raw.githubusercontent.com/riatelab/magrit/master/magrit_app/static/data_sample/nuts0.geojson">Fond de carte des pays européens</a></p>
<h1>Carte qualitative (pictogrammes)</h1>
<p>Ce type de représentation permet de faire figurer des symboles en fonction des valeurs prises par l'attribut de la couche de données.</p>
<blockquote>
<h3>Paramètres</h3>
<ul>
<li>Le nom du champ contenant les valeurs à utiliser</li>
<li>Le choix de pictogrammes correspondants aux différentes catégories à représenter</li>
</ul>
</blockquote>
<h4>Exemple :</h4>
<p style="text-align: center;">
<img src="img/typo_picto.png" alt="picto_map" style="width: 480px;"/>
</p>
<h1>Discrétisation</h1>
<p>Plusieurs méthodes sont proposées afin de transformer une série continue de valeurs en une série discrète, c'est à dire en un nombre fini de classes. Le nombre de classes ainsi que les valeurs limites de ces classes doivent être justifiées sémantiquement et/ou statistiquement.</p>
<p>Les méthodes proposées par l'outil peuvent être utilisées telles quelles ou bien comme des guides de lecture et d'analyse préalables à la saisie manuelle des limites de classes souhaitées.</p>
<hr />
<ul>
<li><strong>Intervalles égaux</strong><br />
Cette méthode, parfois également appelées &quot;amplitudes égales&quot;, permet de créer des classes qui possèdent toutes la même étendue.</li>
</ul>
<ul>
<li><strong>Quantiles</strong><br />
Cette méthode, parfois également décrite par le terme de &quot;discrétisation en classes d'effectifs égaux&quot; permet de former des classes qui possèdent toutes le même nombre d'individus.</li>
</ul>
<ul>
<li><strong>Q6</strong><br />
Cette méthode originale, notamment démocratisée par l'outil <a href="http://philcarto.free.fr/">PhilCarto</a>, permet d'effectuer une discrétisation selon la méthode des quartiles tout en isolant les valeurs extrèmes.</li>
</ul>
<ul>
<li><strong>Seuils naturels (algorithme de <a href="https://en.wikipedia.org/wiki/Jenks_natural_breaks_optimization">Jenks</a>)</strong><br />
Cette méthode permet de créer des classes homogènes. En effet l'algorithme vise à trouver le nombre de classe souhaitées en minimisant la variance intra-classe et en maximisant la variance inter-classe.</li>
</ul>
<ul>
<li>Il est également possible d'utiliser les discrétisations en <strong>progression arithmétique</strong>, en <strong>progression géométrique</strong> ou de saisir manuellement les bornes de classes.</li>
</ul>
<p>Le panneau principal de la boite de dialogue permettant de choisir un type de discrétisation ainsi que les palettes de couleurs représente la distribution dans le nombre de classes désirées, avec des rectangles dont les surfaces correspondent à la fréquence relative d'observations dans la classe correspondante.</p>
<p>Le panneau supérieur droit présente la distribution non-discrétisée selon 3 représentations (histogramme, boite à moustache et <em>essaim d'abeilles</em>).</p>
<p>Vous pouvez consulter l'article <a href="http://mappemonde.mgm.fr/119geov1/">Géovisualisation des discrétisations : une petite application pédagogique</a>, dans la revue <em>MappeMonde</em> n°119, qui met en avant l'importance du choix d'une discrétisation adaptée en cartographie.</p>
<h1>Habillage de la carte</h1>
<p>Magrit propose une série d'éléments nécessaires à l'habillage de la carte :</p>
<p style="text-align: center;">
<img src="img/win_hab_fr.png" alt="Dialogue d'habillage"/>
</p>
<h3>Différentes couches géographiques permettant de contextualiser les données représentées :</h3>
<ul>
<li>Tracé des pays du monde</li>
<li>Tracé des limites administratives à différents échellons infra-nationaux (Europe, USA, Brésil)</li>
<li>...</li>
</ul>
<p style="text-align: center;">
<img src="img/win_hablayer_fr.png" alt="Layer additionnels"/>
</p>
<ul>
<li>Graticule</li>
<li>Dessin de l'emprise du globe</li>
</ul>
<h3>Des couches géographiques d'habillage peuvent être ajoutée par l'utilisateur :</h3>
<ul>
<li>Ces couches peuvent être ajoutées par le gestionnaire de couches</li>
<li>Ces couches servent seulement à l'habillage de la carte et ne peuvent pas être utilisées avec les différents types de représentations proposées
(elles peuvent toutefois faire l'objet d'un mise en forme de base: choix d'une couleur unique de remplissage, choix d'une couleur unique de bordure, réglage de l'opacité et de l'épaisseur de la bordure)</li>
</ul>
<h3>D'autres éléments peuvent être ajoutés, ils sont déplacables au curseur et paramétrables via un clic droit :</h3>
<ul>
<li>Flèche d'orientation</li>
<li>Échelle</li>
<li>Zone de texte</li>
<li>Ellipse</li>
<li>Flèche personnalisable</li>
<li>Symbole</li>
</ul>
<p style="text-align: center;">
<img src="img/example_mise_en_page.png" alt="Éléments de mise en page"/>
</p>
<p style="text-align: center;">
<img src="img/contextmenu_northArrow.png" alt="Menu contextuel"/>
</p>
<p>Les légendes peuvent aussi être modifiées avec le double-click.</p>
<p style="text-align: center;">
<img src="img/contextmenu_legend.png" alt="Menu contextuel"/>
</p>
<p>Les options <strong>&quot;Vers le haut&quot;</strong> et <strong>&quot;Vers le bas&quot;</strong> des menus contextuels des éléments d'habillage permettent de gérer leur ordre d'affichage les uns par rapport aux autres ainsi que les éventuelles superpositions (de manière similaire aux fonctionnalités <strong>&quot;Monter&quot;</strong> et <strong>&quot;Descendre&quot;</strong> applicables à des objets dans <em>Inkscape</em>).</p>
<h1>Export</h1>
<p>Magrit offre plusieurs possibilités d'export :</p>
<ul>
<li>export de la carte réalisée (format vectoriel ou raster),</li>
<li>export des couches géographiques utilisées ou crées par l'application;</li>
<li>export du projet complet (données, fonds de cartes et cartes) pour le partager ou le réutiliser plus tard.</li>
</ul>
<p style="text-align: center;">
<img src="img/win_exp_fr.png" alt="Dialogue d'export">
</p>
<h2>Export au format SVG</h2>
<p style="text-align: center;">
<img src="img/win_svg_fr.png" alt="Dialogue d'export"/>
</p>
<p>Grâce à cette méthode il est possible d'exporter le rendu actuel selon les spécifications <em>SVG 1.2</em>.</p>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>Les exports SVG fournis par l'application visent en priorité l'affichage de l'image par un navigateur web et/ou son édition par un outil comme <a href="https://inkscape.org">Inkscape</a>, Adobe Illustrator ou <a href="https://github.com/SVG-Edit/svgedit">SVGEdit</a>.</li>
</ul>
</blockquote>
<h2>Export au format PNG</h2>
<p style="text-align: center;">
<img src="img/win_exp_fr.png" alt="Dialogue d'export"/>
</p>
<p>Cette méthode permet d'exporter la carte dans un format &quot;raster&quot;, c'est à dire composé de pixels.
La résolution de ce type de fichier est fixe et il est proposé de choisir la résolution en fonction de son futur usage (affichage écran, impression petit ou grand format, etc.).</p>
<h2>Export d'un fichier de couche géographique</h2>
<p style="text-align: center;">
<img src="img/win_geo_fr.png" alt="Dialogue d'export"/>
</p>
<p>Les formats proposés à l'export sont les mêmes que ceux acceptés lors de l'import :</p>
<ul>
<li><code>GeoJSON</code></li>
<li><code>TopoJSON</code></li>
<li><code>Shapefile</code></li>
<li><code>KML</code></li>
<li><code>GML</code></li>
</ul>
<p>Différents systèmes de projection sont proposés par défaut lors de l'export mais il est possible de choisir tout type de système de référence supporté par le projet <a href="https://github.com/OSGeo/proj.4/wiki">Proj.4</a>.</p>
<h2>Sauvegarde du projet en cours</h2>
<p style="text-align: center;">
<img src="img/win_prj_fr.png" alt="Dialogue d'export"/>
</p>
<p>Cette fonctionnalité permet de sauvegarder l'état d'une session et de l'exporter au format <em>JSON</em>.
Le fichier exporté pourra être ouvert à nouveau, depuis n'importe qu'elle poste, et permet de continuer la session de travail.
Cette fonctionnalité de sauvegarde du projet est activée automatiquement lorsque l'utilisateur quitte la page; la session est alors sauvegardée localement dans le navigateur pour une éventuelle reprise ultérieure.</p>
<h1>Jeux de données</h1>
<h3>Communes de la métropole du Grand-Paris :</h3>
<p>Fond de carte : Institut national de l’information géographique et forestière (1)<br />
Variables :</p>
<ul>
<li>DEPCOM : code communal (2)</li>
<li>LIBCOM : nom de la commune (2)</li>
<li>EPT : code le l’Établissement Public Territorial (3)</li>
<li>LIBEPT : nom de l’Établissement Public Territorial (3)</li>
<li>DEP : code du département (2)</li>
<li>INC : somme des revenus déclarés par les ménages (4)</li>
<li>TH : nombre de ménages fiscaux (4)</li>
</ul>
<p>(1) : IGN, <a href="http://professionnels.ign.fr/geofla">GEOFLA® 2015 v2.1 Communes France Métropolitaine</a><br />
(2) : INSEE, 2016<br />
(3) : <a href="http://www.apur.org/article/composition-12-territoires-metropole-grand-paris">Atelier parisien d'urbanisme</a> 2016<br />
(4) : Direction générale des finances publiques, impôts de 2014 sur les revenus de 2013</p>
<h3>Pays du monde :</h3>
<p>Fond de carte : UMS RIATE, 2017<br />
Variables :</p>
<ul>
<li>ISO2 : Code ISO 3166-1 alpha-2</li>
<li>ISO3 : Code ISO 3166-1 alpha-3</li>
<li>ISONUM : Code ISO 3166-1 numeric</li>
<li>NAMEen : Nom du pays en anglais</li>
<li>NAMEfr : Nom du pays en français</li>
<li>UNRegion : Régions macrogéographiques (1)</li>
<li>GrowthRate : Taux de croissance annuel moyen de la population en % (2)</li>
<li>PopDensity : Densité de population en habitants par kilomètres carrés (2)</li>
<li>PopTotal : Population totale (2)</li>
<li>JamesBond : Nombre de fois ou James Bond s'est rendu dans le Pays (3)</li>
</ul>
<p>(1) : United Nations Statistics Division, <a href="http://unstats.un.org/unsd/methods/m49/m49regnf.htm">http://unstats.un.org/unsd/methods/m49/m49regnf.htm</a><br />
(2) : Population Division of the Department of Economic and Social Affairs of the United Nations Secretariat, World Population Prospects: The 2015 Revision, <a href="http://esa.un.org/unpd/wpp/index.htm">http://esa.un.org/unpd/wpp/index.htm</a>, July 2015, Variant : Medium, Année 2015)<br />
(3) : UMS RIATE d'après Wikipedia, de Dr. No en 1962 à Spectre en 2015</p>
<h3>États fédéraux brésiliens :</h3>
<p>Fond de carte :<br />
Variables :</p>
<ul>
<li>ADMIN_NAME : Nom de l’État</li>
<li>Abbreviation : Abbréviation du nom</li>
<li>Capital : Nom de la capitale administrative de l’État</li>
<li>GDP_per_capita_2012 : Produit intérieur brut (PIB) par habitant</li>
<li>Life_expectancy_2014 : Espérance de vie à la naissance</li>
<li>Pop2014 : Population de l’État (1)</li>
<li>REGIONS : Nom de la région d'appartenance</li>
<li>STATE2010 : Code de l’État</li>
<li>popdensity2014 : Densité de population en habitants par kilomètres carrés</li>
</ul>
<p>(1) : '2014 IBGE Estimates - Estimates of Resident Population in Brazil, Federative Units and Municipalities&quot; (PDF) (en Portugais). <a href="ftp://ftp.ibge.gov.br/Estimativas_de_Populacao/Estimativas_2014/estimativa_dou_2014.pdf">ftp://ftp.ibge.gov.br/Estimativas_de_Populacao/Estimativas_2014/estimativa_dou_2014.pdf</a>. Consulté le 25 janv. 2017.<br />
(2) : Wikipedia. Consulté le 25 janv. 2017.<br />
(3) : Wikipedia. Consulté le 25 janv. 2017.</p>
<h3>Communes de Martinique :</h3>
<p>Fond de carte : Institut national de l’information géographique et forestière (1)</p>
<p>Variables :</p>
<ul>
<li>INSEE_COM : Code INSEE de la commune</li>
<li>NOM_COM : Nom de la commune</li>
<li>STATUT :</li>
<li>POP2013 : Population de la commune (2)</li>
<li>DENSPOP : Densité de population en habitants par kilomètres carrés (2)</li>
<li>NbLogements : Nombre de logements (2)</li>
<li>NbLogementsVacants : Nombre de logements vacants (2)</li>
<li>PartLogementVacants : Taux d'occupations des logements (2)</li>
</ul>
<p>(1) : IGN, <a href="http://professionnels.ign.fr/geofla">GEOFLA® 2015 v2.1 Communes France Métropolitaine</a><br />
(2) : INSEE 2013</p>
<h3>Régions européennes Nuts 2 :</h3>
<p>Fond de Carte : GREAT, NUTS 2 Version 2013, UMS RIATE 2017<br />
Variable :</p>
<ul>
<li>ID : Code NUTS2</li>
<li>NAME : Nom</li>
<li>POP : Population au 1er janvier 2014 (1)</li>
<li>GDP : Produit intérieur brut régional en millions d'euros et en standards de pouvoir d'achat, en 2014 (2)</li>
<li>UNEMP : Taux de chômage en %, en 2014 (3)</li>
<li>COUNTRY : Code du pays d'appartenance</li>
</ul>
<p>(1) : Eurostat, Dernière mise à jour: 19.01.2017, Date d'extraction: 23 janv. 2017 16:34:48 CET, <a href="http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&plugin=1&language=fr&pcode=tgs00096">http://ec.europa.eu/eurostat/tgm/table.do?tab=table&amp;init=1&amp;plugin=1&amp;language=fr&amp;pcode=tgs00096</a><br />
(2) : Eurostat, Dernière mise à jour: 18.01.2017, Date d'extraction: 23 janv. 2017 16:38:34 CET, <a href="http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&plugin=1&language=fr&pcode=tgs00004">http://ec.europa.eu/eurostat/tgm/table.do?tab=table&amp;init=1&amp;plugin=1&amp;language=fr&amp;pcode=tgs00004</a><br />
(3) : Eurostat, Dernière mise à jour: 19.01.2017, Date d'extraction: 23 janv. 2017 16:56:02 CET, <a href="http://ec.europa.eu/eurostat/tgm/table.do?tab=table&init=1&plugin=1&language=fr&pcode=tgs00010">http://ec.europa.eu/eurostat/tgm/table.do?tab=table&amp;init=1&amp;plugin=1&amp;language=fr&amp;pcode=tgs00010</a></p>
<h3>États des Etats-Unis :</h3>
<p>Fond de carte :<br />
Variables :</p>
<ul>
<li>STUSPS : Identifiant/code de l'état</li>
<li>Name : Nom de l'état</li>
<li>POP2015_est : Estimation du nombre d'habitants en 2015 (1)</li>
<li>POPDENS : Densité de population en nombre d'habitants par kilomètres carrés (1)</li>
</ul>
<p>(1) : 2015 Population Estimates. United States Census Bureau, Population Division. January 2016. &quot;Table 1. Annual Estimates of the Resident Population for the United States, Regions, States, and Puerto Rico: April 1, 2010 to July 1, 2015&quot; <a href="http://www.census.gov/popest/data/state/totals/2015/tables/NST-EST2015-01.xlsx">http://www.census.gov/popest/data/state/totals/2015/tables/NST-EST2015-01.xlsx</a>).</p>
<h3>Utilisation des cookies et respect de la vie privée</h3>
<p>Plusieurs <em>cookies</em> et fonctionnalitées de <em>stockages temporaires</em>, locales et distantes, sont utilisés par l'application. Toutes se veulent non-intrusives et nous nous engageons à ce que les données envoyées/traitées par l'application ne soient utilisées et accessibles qu'à l'utilisateur à qui elles appartiennent.</p>
<h4>Quelques détails permettant de comprendre le chemin des données :</h4>
<p>Lors de l'import d'une couche utilisateur, celle-ci est transformée et stockée temporairement (le temps d'une session utilisateur) en mémoire temporaire (via <a href="https://fr.wikipedia.org/wiki/Redis">redis</a>). C'est cette couche transformée qui est affichée dans le navigateur web.</p>
<p>Lors du calcul d'une représentation générant une nouvelle géométrie (carte lissée, carroyage, discontinuité, cartogramme et liens), le résultat est également stocké en mémoire temporaire (redis) le temps de votre session.</p>
<p>Ce stockage permet d'une part de lancer les calculs dès le choix des paramètres effectué par l'utilisateur (sans avoir à envoyer les géométries à nouveau) et d'autres part de proposer des exports dans des formats &quot;géographiques&quot; variés lorsque l'utilisateur le souhaite.
Ces couches sont supprimées lors de la fermeture de la session par l'utilisateur.</p>
<h4>Détails des cookies utilisés :</h4>
<p>La mémorisation de ces couches le temps d'une session est rendue possible par l'utilisation d'un <strong>cookie</strong>, dont la durée d'expiration est celle d'une <strong>session</strong>, contenant une clée échangée avec le serveur.</p>
<p>Deux autres cookies sont utilisés et ne sont pas échangés avec le serveur :</p>
<ul>
<li>un cookie est utilisé pour se souvenir de la dernière langue utilisée par l'utilisateur (il est paramétré avec une durée d'expiration longue).</li>
<li>un cookie est utilisé pour se souvenir de l'acceptation de l'usage des cookies par l'utilisateur (il est paramétré avec une durée d'expiration longue).</li>
</ul>
<h4>Autre fonctionnalité de stockage :</h4>
<p>La fonctionnalité proposant de reprendre le projet en cours se base sur la capacité de &quot;stockage local&quot; (<em><a href="https://developer.mozilla.org/fr/docs/Web/API/Window/localStorage">localStorage</a></em>) des navigateurs web. Le projet en cours est donc intégralement stocké dans le navigateur de l'utilisateur et le serveur n'en a pas connaissance
(de même qu'il n'a pas connaissance des fichiers-projets exportés par l'utilisateur).</p>
<h5>Garanties supplémentaires</h5>
<p>Il facilement possible de déployer une instance locale (sur votre réseau d'entreprise ou votre ordinateur personnel) afin de ne pas faire transiter les données vers notre instance. Des informations sont disponibles sur la <a href="http://github.com/riatelab/magrit">page Github du projet</a> et peuvent être complétées en contactant l'équipe via la page contact.</p>
<h1>Contributeurs</h1>
<p>Matthieu Viry : Développement &amp; Conception</p>
<p>Timothée Giraud &amp; Nicolas Lambert : Conception</p>
<h2>Financement</h2>
<p><a href="http://riate.cnrs.fr">UMS Riate</a></p>

                </div>

                <!-- Mobile navigation buttons -->
                

                

            </div>

            

            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        <script src="highlight.js"></script>
        <script src="book.js"></script>
    </body>
</html>
