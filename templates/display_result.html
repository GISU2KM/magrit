<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="utf-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <meta name="description" content="">
     <meta name="author" content="">
     <title>{{ title }}</title>
     <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
     <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.js"></script>

     <style>
       #map { height: 320px; }
     </style>
 </head>

 <body>
    <div><h3>{{ title }}</h3></div>
    <div id="map"></div>
    <b><i>Raw result :</b></i>
    <div id="raw_result">{{ content }}</div>
      <script>
	map = new L.Map('map');
	var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
	var osm = new L.TileLayer(osmUrl, {minZoom: 4, maxZoom: 15, attribution: osmAttrib});		

	map.setView(new L.LatLng(48.3, 2.7),5);
	map.addLayer(osm);
      var result = document.getElementById('raw_result').innerHTML;

      var myStyle = {
          "color": "#ff7800",
          "weight": 5,
          "opacity": 0.75
      };
      var geojsonLayer = new L.GeoJSON(JSON.parse(result));
      map.addLayer(geojsonLayer, {style: myStyle});
      map.fitBounds(geojsonLayer.getBounds());
      </script>
 </body>
 </html>
