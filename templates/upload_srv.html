<html>

<head>
<title>Index</title>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="">
   <meta name="author" content="">
   <style>#map { height: 320px; }</style>
   <title>Upload page</title>
   <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css"/>
   <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
 </head>

 <body>
     <div id="content">
        <h3>Upload page</h3><br>
        <form action="upload" method="post" enctype=multipart/form-data>
          <p><input type="file" multiple="" name=file[]>
             <input type=submit value=Upload>
        </form>
        {{ content_d }}
   </div><br>
   <div id="map"></div><br>
   <b><i>Raw result :</b></i><br>
    <div id="raw_result">{{ raw_result }}</div>
      <script>
	map = new L.Map('map');
	var osmUrl='http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
	var osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors';
	var osm = new L.TileLayer(osmUrl, {minZoom: 4, maxZoom: 15, attribution: osmAttrib});		

	map.setView(new L.LatLng(48.3, 2.7),5);
	map.addLayer(osm);
      var result = document.getElementById('raw_result').innerHTML;

      var myStyle = {
          "color": "#ff7800",
          "weight": 5,
          "opacity": 0.75
      };
      var geojsonLayer = new L.GeoJSON(JSON.parse(result));
      map.addLayer(geojsonLayer, {style: myStyle});
      map.fitBounds(geojsonLayer.getBounds());
      </script>
</body>
</html>
